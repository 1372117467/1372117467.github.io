<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <head>
  <!-- 已有 meta 标签下方添加 -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
  <title>DH电玩游戏选择系统</title>
  <style>
    /* 原有样式保持不变... */
    
    /* 新增移动端适配样式 */
    @media (max-width: 768px) {
        header {
            height: 50px;
            line-height: 50px;
            font-size: 18px;
        }
        
        #searchBox {
            top: 50px;
            height: 45px;
            padding: 8px;
        }
        
        #searchBox input {
            width: 90%;
            height: 28px;
        }
        
        #sidebar {
            width: 100%;
            height: auto;
            position: static;
            display: flex;
            flex-wrap: wrap;
            overflow-x: auto;
            overflow-y: hidden;
            border-right: none;
            border-bottom: 1px solid #eee;
            padding: 5px 0;
        }
        
        #sidebar a {
            padding: 8px 12px;
            margin: 0 5px;
            border-left: none;
            border-bottom: 3px solid transparent;
            white-space: nowrap;
        }
        
        #sidebar a:hover {
            border-left-color: transparent;
            border-bottom-color: #4b6cb7;
        }
        
        #content {
            margin-left: 0;
            padding: 20px 10px 80px;
        }
        
        .game-item {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .quantity-control {
            margin-top: 10px;
            align-self: flex-end;
        }
        
        #orderPage {
            padding: 15px;
        }
        
        #orderTable th, #orderTable td {
            padding: 8px 5px;
            font-size: 14px;
        }
        
        .footer {
            height: 50px;
            padding: 0 10px;
        }
        
        .footer button {
            padding: 8px 15px;
            font-size: 14px;
        }
    }
    
    /* 针对小屏幕手机的额外调整 */
    @media (max-width: 480px) {
        .game-title {
            font-size: 14px;
        }
        
        .game-size {
            font-size: 11px;
        }
        
        #orderTable {
            font-size: 13px;
        }
        
        .remove-btn {
            padding: 3px 6px;
            font-size: 12px;
        }
    }
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Microsoft YaHei', sans-serif;
      background-color: #f5f5f5;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: linear-gradient(to right, #4b6cb7, #182848);
      color: white;
      text-align: center;
      line-height: 60px;
      font-size: 20px;
      font-weight: bold;
      z-index: 100;
    }
    #searchBox {
      position: fixed;
      top: 60px;
      left: 0;
      width: 100%;
      height: 50px;
      background: white;
      padding: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 99;
    }
    #searchBox input {
      width: 80%;
      height: 30px;
      padding: 5px 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    /* 修改侧边栏样式 */
    #sidebar {
  position: fixed;
  top: 110px;
  left: 0;
  width: 120px;
  height: calc(100vh - 170px); /* 增加底部间距 */
  background: rgb(255, 255, 255);
  overflow-y: auto;
  overflow-x: hidden;
  border-right: 1px solid #eee;
  scrollbar-width: thin;
  scrollbar-color: #4b6cb7 #f0f0f0;
  padding-bottom: 100px; /* 添加内边距 */
}
    
    /* 自定义滚动条样式 - Chrome/Safari/Edge */
    #sidebar::-webkit-scrollbar {
      width: 6px;
    }
    
    #sidebar::-webkit-scrollbar-track {
      background: #f0f0f0;
    }
    
    #sidebar::-webkit-scrollbar-thumb {
      background-color: #4b6cb7;
      border-radius: 3px;
    }
    
    #sidebar a {
      display: block;
      padding: 12px 15px;
      color: #555;
      text-decoration: none;
      border-left: 3px solid transparent;
      transition: all 0.3s;
      white-space: nowrap; /* 防止文字换行 */
      overflow: hidden; /* 隐藏溢出内容 */
      text-overflow: ellipsis; /* 显示省略号 */
    }
    
    #sidebar a:hover {
      background: #f0f0f0;
      border-left-color: #4b6cb7;
      color: #4b6cb7;
    }
  
    #content {
  margin-left: 120px;
  padding: 120px 20px 100px; /* 增加底部内边距 */
  min-height: calc(100vh - 220px); /* 确保足够高度 */
}
   .category {
  background: white;
  margin-bottom: 10px;  /* 减少分类容器之间的间距 */
  padding: 10px 15px;  /* 减少内边距（原可能是15-20px） */
  border-radius: 5px;
  box-shadow: 0 1px 3px rgba(0,0,0,0.1);
}
 /* 最紧凑版本 */
.category h2 {
  color: #4b6cb7;
  margin: 0 0 2px 0; /* 上下左右边距 */
  padding: 0 0 2px 0; 
  border-bottom: 1px solid #eee;
  font-size: 16px;
  line-height: 1.2; /* 减少行高 */
}

.category {
  background: white;
  margin-bottom: 8px;
  padding: 8px 12px;
  border-radius: 4px;
  box-shadow: 0 1px 2px rgba(0,0,0,0.05);
}

.game-item {
  margin: 3px 0;
}
    .game-info {
      flex: 1;
    }
    .game-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .game-size {
      color: #666;
      font-size: 12px;
    }
    .quantity-control {
      display: flex;
      align-items: center;
    }
    .quantity-control button {
      width: 30px;
      height: 30px;
      background: #4b6cb7;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .quantity-control button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .quantity-control span {
      width: 30px;
      text-align: center;
    }
    #orderPage {
      display: none;
      padding: 20px;
      background: white;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    #orderTable {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    #orderTable th, #orderTable td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }
    #orderTable th {
      background: #f5f5f5;
    }
    .remove-btn {
      background: #ff5252;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    .footer {
  position: fixed;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 60px;
  background: white;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
  border-top: 1px solid #eee;
  z-index: 98; /* 确保在侧边栏下方 */
}
    .footer button {
      background: #4b6cb7;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
       /* 新增自定义弹窗样式 */
    .custom-alert {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      z-index: 9999;
      max-width: 80%;
      min-width: 300px;
    }
    .alert-content {
      margin: 10px 0;
    }
    .game-codes {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      max-height: 200px;
      overflow-y: auto;
    }
    .copy-btn {
      background: #4b6cb7;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    .alert-buttons {
      text-align: center;
      margin-top: 15px;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9998;
    }
    }
  </style>
  <style>
    /* 新增防截图保护样式 */
    body {
      -webkit-user-select: none;  /* 禁止文本选择 */
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    #gameCategories::after {
      content: "DH电玩·免费选择游戏";
      position: fixed;
      bottom: 280px;
      right: 120px;
      color: rgba(29, 32, 37, 0.2);
      font-size: 24px;
      transform: rotate(-15deg);
      pointer-events: none;
      z-index: 9999;
    }
    
    /* 动态干扰线 */
    @keyframes anti-screenshot {
      0% { box-shadow: 0 0 10px rgba(75,108,183,0.1); }
      50% { box-shadow: 0 0 15px rgba(255,82,82,0.2); }
      100% { box-shadow: 0 0 10px rgba(75,108,183,0.1); }
    }
    body {
      animation: anti-screenshot 2s infinite;
    }
    </style>
</head>
<body>
  <header>DH游戏选择系统</header>
  
  <div id="searchBox">
    <input type="text" id="searchInput" placeholder="搜索游戏..." oninput="filterGames()">
  </div>
  
  <div id="sidebar"></div>
  
  <div id="content">
    <div id="gameCategories"></div>
  </div>
  
  <div id="orderPage">
    <h2>订单详情</h2>
    <table id="orderTable">
      <thead>
        <tr>
          <th>游戏名称</th>
          <th>单款容量 (GB)</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody id="orderTableBody"></tbody>
      <tfoot>
        <tr>
          <td style="text-align:right;">总容量：(GB)</td>
          <td id="orderTotal">0</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
    <div style="text-align:center; margin-top:30px; display:flex; justify-content:center; gap:20px;">
  <button 
    onclick="backToShop()" 
    style="
      padding: 12px 30px;
      border: none;
      border-radius: 30px;
      background: linear-gradient(135deg, #f5f7fa, #c3cfe2);
      color: #4b6cb7;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    "
    onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 12px rgba(0,0,0,0.15)'"
    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.1)'">
    ← 返回继续选购
  </button>
  
  <button 
    onclick="confirmOrder()" 
    style="
      padding: 12px 30px;
      border: none;
      border-radius: 30px;
      background: linear-gradient(135deg, #4b6cb7, #182848);
      color: white;
      font-weight: bold;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    "
    onmouseover="this.style.transform='translateY(-3px)'; this.style.boxShadow='0 6px 12px rgba(0,0,0,0.2)'; this.style.background='linear-gradient(135deg, #3a5a9d, #101f38)'"
    onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 8px rgba(0,0,0,0.1)'; this.style.background='linear-gradient(135deg, #4b6cb7, #182848)'">
    确认订单发给客服 →
  </button>
</div>
  </div>
  
  <div class="footer">
    <span id="totalSize">总容量：0 GB</span>
    <button onclick="generateOrder()">生成订单</button>
  </div>

  <script>
    // 在原有脚本中添加移动端支持
    
    // 修改 generateSidebar 函数
    function generateSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.innerHTML = '';
      for (const category in gameData) {
        const link = document.createElement('a');
        link.href = `#${category}`;
        link.textContent = category;
        // 添加触摸反馈
        link.ontouchstart = function() {
          this.style.transform = 'scale(0.98)';
        };
        link.ontouchend = function() {
          this.style.transform = 'scale(1)';
        };
        sidebar.appendChild(link);
      }
    }
    
    // 修改按钮事件，添加触摸支持
    function addMobileButtonEvents() {
      const buttons = document.querySelectorAll('button');
      buttons.forEach(button => {
        button.ontouchstart = function() {
          this.style.opacity = '0.8';
        };
        button.ontouchend = function() {
          this.style.opacity = '1';
        };
      });
    }
    
    // 在 window.onload 中调用
    window.onload = function() {
      generateSidebar();
      displayCategories();
      updateTotal();
      addMobileButtonEvents(); // 新增
    };
    // 防截图保护功能
document.addEventListener('keydown', function(e) {
  // 检测 PrintScreen 和 Windows+Shift+S
  if (e.key === 'PrintScreen' || (e.key === 's' && e.ctrlKey && e.shiftKey)) {
    alert('⚠️ 系统检测到截图操作，请注意信息安全！');
    document.body.style.filter = 'blur(5px)';
    setTimeout(() => document.body.style.filter = '', 2000);
  }
});

// 禁用右键菜单
document.addEventListener('contextmenu', function(e) {
  e.preventDefault();
  alert('右键功能已禁用');
  return false;
});

// 防止控制台打开
setInterval(function() {
  if (window.outerWidth - window.innerWidth > 200 || 
      window.outerHeight - window.innerHeight > 200) {
    document.body.innerHTML = '<h1 style="color:red">检测到开发者工具，系统已锁定！</h1>';
    window.location.reload();
  }
}, 1000);
    // 游戏数据示例
    const gameData = {
  "游戏前端":[ { "code": "0", "name": "游戏前端（必选）", "size": 5 },],   
  "热门游戏": [
    {"code": "L13", "name": "捞女游戏", "size": 21.7},
    {"code": "B1", "name": "博德之门3", "size": 147},
    {"code": "Z10", "name": "战神5：诸神黄昏", "size": 178},
    {"code": "S1", "name": "赛博朋克2077", "size": 90.8},
    {"code": "H5", "name": "荒野大镖客2", "size": 119},
    {"code": "A1", "name": "艾尔登法环", "size": 66.2},
    {"code": "G2", "name": "GTA5", "size": 98.3},
    {"code": "D5", "name": "极限竞速：地平线5", "size": 175},
    {"code": "Z16", "name": "最后的生还者2", "size": 115},
    {"code": "X12", "name": "星空", "size": 140},
    {"code": "Z19", "name": "最终幻想16", "size": 151},
    {"code": "C3", "name": "刺客信条：奥德赛", "size": 101},
    {"code": "C5", "name": "刺客信条：英灵殿", "size": 130},
    {"code": "H2", "name": "霍格沃茨之遗", "size": 73.9},
    {"code": "W4", "name": "巫师3 次世代版", "size": 61.7},
    {"code": "Z6", "name": "最终幻想 VII 重生", "size": 154},
    {"code": "Z7", "name": "最终幻想VII：重制版", "size": 94.2},
    {"code": "D7", "name": "地平线：西之绝境", "size": 123},
    {"code": "Z9", "name": "战神4", "size": 64.6},
    {"code": "M2", "name": "漫威蜘蛛侠2", "size": 111},
    {"code": "G4", "name": "怪物猎人：世界", "size": 98.4},
    {"code": "L6", "name": "浪人崛起", "size": 149},
    {"code": "F1", "name": "辐射4 mod版", "size": 144},
    {"code": "S22", "name": "方舟：生存飞升", "size": 211},
    {"code": "COD14", "name": "使命召唤14：二战", "size": 156},
    {"code": "W7", "name": "无主之地3", "size": 137},
    {"code": "X1", "name": "心灵杀手2", "size": 106},
    {"code": "S10", "name": "生化危机4", "size": 59.1},
    {"code": "T3", "name": "铁拳8", "size": 92.9},
    {"code": "Z11", "name": "真人快打11", "size": 108},
    {"code": "J1", "name": "极品飞车1-21", "size": 200},
    {"code": "N1", "name": "NBA 2K23", "size": 137},
    {"code": "SWT2", "name": "塞尔达传说：旷野之息", "size": 15.7},
    {"code": "SWT3", "name": "塞尔达传说：王国之泪", "size": 16.6},
    {"code": "D22", "name": "多重人生", "size": 48.1},
  ],

  "角色扮演RPG": [
    {"code": "C4", "name": "刺客信条：起源", "size": 73.3},
    {"code": "L3", "name": "龙之信条2", "size": 70.8},
    {"code": "X9", "name": "仙剑奇侠传7", "size": 43.4},
    {"code": "D2", "name": "地铁：离去", "size": 100},
    {"code": "N4", "name": "尼尔机械纪元 年度版", "size": 41.5},
    {"code": "Z27", "name": "最终幻想15", "size": 83.8},
    {"code": "A4", "name": "艾尔登法环：黑夜君临", "size": 20.6},
    {"code": "S37", "name": "上古卷轴5：天际 周年纪念版", "size": 31.4},
    {"code": "X24", "name": "轩辕剑7", "size": 38.8},
    {"code": "L1", "name": "龙珠：超宇宙2", "size": 30.2},
    {"code": "L2", "name": "龙珠Z：卡卡罗特", "size": 51.2},
    {"code": "M1", "name": "漫威复仇者联盟", "size": 131},
    {"code": "M3", "name": "漫威蜘蛛侠:重制版", "size": 64},
    {"code": "M4", "name": "蜘蛛侠：迈尔斯·莫拉莱斯", "size": 45},
    {"code": "R2", "name": "仁王2", "size": 45},
    {"code": "R3", "name": "仁王", "size": 40},
    {"code": "W1", "name": "瘟疫传说：安魂曲", "size": 49.4},
    {"code": "W3", "name": "卧龙：苍天陨落", "size": 40},
    {"code": "X7", "name": "星球大战绝地：陨落的武士团", "size": 55},
    {"code": "Y1", "name": "原子之心", "size": 70}
  ],

  "开放世界": [
    {"code": "F6", "name": "法外枭雄：滚石城", "size": 87.8},
    {"code": "Z36", "name": "庄园领主", "size": 11.7},
    {"code": "G10", "name": "GTA4 合集", "size": 45.2},
    {"code": "H4", "name": "幻兽帕鲁", "size": 26.1},
    {"code": "K1", "name": "看门狗", "size": 16.8},
    {"code": "K2", "name": "看门狗2", "size": 45.4},
    {"code": "L5", "name": "猎人：野性的呼唤", "size": 94.1},
    {"code": "N2", "name": "虐杀原形1+2", "size": 20.8},
    {"code": "Q7", "name": "骑马与砍杀2", "size": 49.8},
    {"code": "W5", "name": "无人深空", "size": 12.6},
    {"code": "Y6", "name": "遗迹2", "size": 86.5},
    {"code": "Y7", "name": "幽灵行动：荒野完全版", "size": 86.3},
    {"code": "Z12", "name": "正当防卫1-4", "size": 140},
    {"code": "Y8", "name": "云族裔inZOI", "size": 22.2},
    {"code": "A5", "name": "艾瑞卡", "size": 36.7},
    {"code": "Y11", "name": "野狗子", "size": 26}
  ],

  "动作冒险": [
    {"code": "C1", "name": "刺客信条4：黑旗", "size": 28.5},
    {"code": "C2", "name": "刺客信条：幻景", "size": 41.2},
    {"code": "C6", "name": "刺客信条：大革命", "size": 51.3},
    {"code": "D6", "name": "地平线：零之曙光", "size": 120},
    {"code": "D10", "name": "对马岛之魂导演剪辑版", "size": 52.1},
    {"code": "G1", "name": "孤岛惊魂6", "size": 77.4},
    {"code": "G5", "name": "古墓丽影：暗影", "size": 37.4},
    {"code": "G6", "name": "古墓丽影9", "size": 21.6},
    {"code": "G7", "name": "古墓丽影10：崛起", "size": 27.2},
    {"code": "S7", "name": "神秘海域：盗贼遗产合集", "size": 99.5},
    {"code": "Z15", "name": "最后的生还者", "size": 79.7},
    {"code": "G11", "name": "孤岛惊魂 5", "size": 72.5},
    {"code": "G12", "name": "光与影：33号远征队", "size": 40.6},
    {"code": "H10", "name": "合金装备崛起：复仇", "size": 25},
    {"code": "S24", "name": "森林之子", "size": 14.8},
    {"code": "S25", "name": "沙石镇时光", "size": 27.8},
    {"code": "H23", "name": "哈迪斯 杀出地狱", "size": 11},
    {"code": "H24", "name": "黑道圣徒4", "size": 28.3},
    {"code": "H25", "name": "海贼无双4：终极版", "size": 26.6},
    {"code": "M14", "name": "马克思佩恩3", "size": 32.6},
    {"code": "M16", "name": "盟军敢死队3高清重制版", "size": 3.66},
    {"code": "Z35", "name": "灾后修复师", "size": 48.4},
    {"code": "Q22", "name": "骑马与砍杀：战团", "size": 5.31},
    {"code": "M19", "name": "盟军敢死队2高清重制版", "size": 3.38}
  ],

  "射击游戏": [
    {"code": "COD4CZ", "name": "使命召唤4：现代战争重制版", "size": 62.3},
    {"code": "COD6CZ", "name": "使命召唤6：现代战争2重制版", "size": 63.8},
    {"code": "COD7", "name": "使命召唤7：黑色行动", "size": 7.84},
    {"code": "COD8", "name": "使命召唤8：现代战争3", "size": 13.7},
    {"code": "COD9", "name": "使命召唤9：黑色行动2", "size": 15},
    {"code": "COD10", "name": "使命召唤10：幽灵", "size": 28.9},
    {"code": "COD11", "name": "使命召唤11：高级战争", "size": 36.6},
    {"code": "COD12", "name": "使命召唤12：黑色行动3", "size": 125},
    {"code": "COD13", "name": "使命召唤13：无限战争", "size": 72.3},
    {"code": "COD15", "name": "使命召唤15：黑色行动4", "size": 142},
    {"code": "COD16", "name": "使命召唤16：现代战争", "size": 194},
    {"code": "COD18", "name": "使命召唤18 先锋", "size": 81.4},
    {"code": "COD19", "name": "使命召唤19：现代战争2", "size": 36.1},
    {"code": "H1", "name": "毁灭战士", "size": 62.2},
    {"code": "H6", "name": "皇牌空战7：未知空域", "size": 61.1},
    {"code": "T4", "name": "泰坦陨落2", "size": 58},
    {"code": "Z1", "name": "战地1", "size": 30.8},
    {"code": "Z4", "name": "战地4", "size": 25.5},
    {"code": "Z5", "name": "战地5", "size": 50.2},
    {"code": "Y5", "name": "严阵以待", "size": 61.8},
    {"code": "Z3", "name": "战地3", "size": 22.8},
    {"code": "Z28", "name": "战锤40K：星际战士2", "size": 71.5},
    {"code": "Q17", "name": "求生之路2", "size": 27.7},
    {"code": "Z31", "name": "战地2", "size": 2.78},
    {"code": "J13", "name": "JOJO的奇妙冒险：群星之战重制版", "size": 5.05},
    {"code": "J14", "name": "狙击精英V2", "size": 12.9},
    {"code": "J15", "name": "狙击精英3", "size": 28.3},
    {"code": "J16", "name": "狙击精英(2005)", "size": 3.06},
    {"code": "K4", "name": "抗日：血战上海滩", "size": 0.262},
    {"code": "W10", "name": "无主之地2", "size": 11.9},
    {"code": "W11", "name": "无主之地：前传", "size": 31.1},
    {"code": "Z37", "name": "终结者：反抗军", "size": 30},
    {"code": "Z38", "name": "终结者：黑暗命运 - 反抗", "size": 14.6},
    {"code": "T1", "name": "逃离塔科夫", "size": 36.9},
    {"code": "T8", "name": "突袭1-4合集", "size": 14},
    {"code": "S43", "name": "死亡空间1-3", "size": 29.4}
  ],

  "策略模拟": [
    {"code": "C7", "name": "城市天际线2", "size": 62.6},
    {"code": "D8", "name": "动物园之星", "size": 10.9},
    {"code": "D12", "name": "帝国时代2决定版", "size": 57.3},
    {"code": "D14", "name": "帝国时代4", "size": 54.1},
    {"code": "H8", "name": "红色警戒2", "size": 1.83},
    {"code": "M7", "name": "魔兽争霸Ⅲ：冰封王座", "size": 14.6},
    {"code": "S15", "name": "三国志8重置版", "size": 21.5},
    {"code": "W6", "name": "文明6", "size": 27.6},
    {"code": "X4", "name": "幸福工厂", "size": 25.3},
    {"code": "Z17", "name": "战争号令：地狱之门", "size": 181},
    {"code": "Z18", "name": "战锤40K：行商浪人", "size": 36.6},
    {"code": "Z20", "name": "真三国无双：起源", "size": 51.3},
    {"code": "Z21", "name": "真三国无双8帝国", "size": 41.1},
    {"code": "M8", "name": "模拟农场25", "size": 37.1},
    {"code": "L11", "name": "罗马2：全面战争", "size": 35.4},
    {"code": "L12", "name": "了不起的修仙模拟器", "size": 4.86},
    {"code": "Q10", "name": "全面战争 阿提拉", "size": 24.2},
    {"code": "Q11", "name": "全面战争 罗马", "size": 71.6},
    {"code": "Q12", "name": "全面战争 拿破仑", "size": 22.7},
    {"code": "Q13", "name": "全面战争 三国", "size": 33.9},
    {"code": "Q14", "name": "全面战争 战锤2", "size": 64.2},
    {"code": "Q15", "name": "全面战争 战锤", "size": 33.5},
    {"code": "Q16", "name": "全面战争传奇 大不列颠王座", "size": 12.5},
    {"code": "Q18", "name": "全面战争中世纪2", "size": 15},
    {"code": "S31", "name": "双点医院", "size": 8.3},
    {"code": "W9", "name": "网吧模拟器", "size": 3.91},
    {"code": "C12", "name": "城市天际线", "size": 18.4},
    {"code": "M17", "name": "魔法门之英雄无敌7", "size": 14.5},
    {"code": "Q19", "name": "全面战争模拟器", "size": 4.49},
    {"code": "Y12", "name": "英雄连2", "size": 32.1},
    {"code": "M18", "name": "名利的游戏", "size": 21.1},
    {"code": "S38", "name": "苏丹的游戏", "size": 2.36},
    {"code": "D21", "name": "帝国时代3", "size": 54.2},
    {"code": "G15", "name": "国王的恩赐2", "size": 55.4},
    {"code": "M20", "name": "魔法门之英雄无敌1-6合集", "size": 12.7},
    {"code": "W15", "name": "文明5", "size": 8.3},
    {"code": "Y13", "name": "英雄连", "size": 22.3},
    {"code": "Y15", "name": "英雄连3", "size": 27.8},
    {"code": "S44", "name": "三国群英传1-7", "size": 5.16},
    {"code": "Y14", "name": "要塞：十字军东征", "size": 3.11},
    {"code": "Y16", "name": "要塞3", "size": 1.83}
  ],

  "格斗/动作": [
    {"code": "G3", "name": "鬼泣5", "size": 40.1},
    {"code": "H3", "name": "火影忍者：终极风暴羁绊", "size": 29.7},
    {"code": "J6", "name": "街头霸王5", "size": 46.2},
    {"code": "P2", "name": "匹诺曹的谎言", "size": 40},
    {"code": "Q4", "name": "拳皇15", "size": 50.9},
    {"code": "Q5", "name": "七龙珠：电光炸裂 Zero", "size": 28.5},
    {"code": "Q6", "name": "拳皇14", "size": 17.3},
    {"code": "R1", "name": "忍者龙剑传2：黑之章", "size": 81.4},
    {"code": "S17", "name": "师父", "size": 20},
    {"code": "T3", "name": "铁拳8", "size": 92.9},
    {"code": "Z11", "name": "真人快打11", "size": 108},
    {"code": "Z13", "name": "真人快打X", "size": 40.2},
    {"code": "Z14", "name": "只狼", "size": 14.8},
    {"code": "S23", "name": "死神：魂魄觉醒", "size": 71.7},
    {"code": "Q20", "name": "拳皇98：终极对决", "size": 2.11}
  ],

  "体育竞技": [
    {"code": "D4", "name": "极限竞速：地平线4", "size": 110},
    {"code": "D5", "name": "极限竞速：地平线5", "size": 175},
    {"code": "C8", "name": "尘埃拉力赛2.0", "size": 109},
    {"code": "E1", "name": "EA 运动 FC 25 足球", "size": 48.2},
    {"code": "J1", "name": "极品飞车1-21", "size": 200},
    {"code": "J5", "name": "极限巅峰", "size": 29.6},
    {"code": "J9", "name": "极限国度", "size": 26.2},
    {"code": "J10", "name": "极速骑行5", "size": 48.7},
    {"code": "N1", "name": "NBA 2K23", "size": 137},
    {"code": "N3", "name": "NBA18", "size": 66.1},
    {"code": "Z8", "name": "足球经理2018-2023合集", "size": 21.1},
    {"code": "F2", "name": "FIFA 23", "size": 50.1},
    {"code": "S39", "name": "实况足球2021", "size": 38.9},
    {"code": "W12", "name": "美国职业摔角联盟2K25", "size": 97},
    {"code": "J18", "name": "极速骑行4", "size": 34.2},
    {"code": "S42", "name": "世界汽车拉力锦标赛10", "size": 36.8}
  ],

  "恐怖/惊悚": [
    {"code": "J3", "name": "寂静岭2", "size": 34.7},
    {"code": "M6", "name": "木卫四协议", "size": 50},
    {"code": "S9", "name": "生化危机3", "size": 22.5},
    {"code": "S10", "name": "生化危机4", "size": 59.1},
    {"code": "S13", "name": "生化危机7", "size": 38.5},
    {"code": "S14", "name": "生化危机8", "size": 37.7},
    {"code": "X1", "name": "心灵杀手2", "size": 106},
    {"code": "X10", "name": "行尸走肉：最终季", "size": 45.4},
    {"code": "Z22", "name": "直到黎明：重制版", "size": 59.4},
    {"code": "S11", "name": "生化危机5", "size": 8.48},
    {"code": "S12", "name": "生化危机6", "size": 13.8},
    {"code": "S26", "name": "生化危机：启示录", "size": 7.94},
    {"code": "S27", "name": "生化危机：启示录 2", "size": 18},
    {"code": "F5", "name": "奉天白事铺", "size": 6.46},
    {"code": "M13", "name": "木筏求生", "size": 7.26},
    {"code": "S32", "name": "深海迷航", "size": 5.79},
    {"code": "Z32", "name": "纸人：第一章", "size": 2.03},
    {"code": "Z33", "name": "纸人2", "size": 7.41},
    {"code": "Y11", "name": "野狗子", "size": 26},
    {"code": "A5", "name": "艾瑞卡", "size": 36.7},
    {"code": "S34", "name": "杀手5：赦免", "size": 23.7},
    {"code": "T6", "name": "她看到红色", "size": 2.37},
    {"code": "C13", "name": "吃香", "size": 1.38},
    {"code": "G16", "name": "港鬼实录", "size": 14.3}
  ],

  "独立游戏": [
    {"code": "S35", "name": "死亡细胞", "size": 2.58},
    {"code": "T5", "name": "泰拉瑞亚", "size": 0.0221},
    {"code": "P4", "name": "破碎族裔", "size": 9.24},
    {"code": "S36", "name": "沙威玛传奇", "size": 0.0941},
    {"code": "M15", "name": "米塔", "size": 2.88},
    {"code": "D1", "name": "迪士尼传奇米奇：重制版", "size": 23.7},
    {"code": "L4", "name": "乐高DC超级反派", "size": 19.1},
    {"code": "M5", "name": "麻布仔大冒险", "size": 53},
    {"code": "S5", "name": "山河旅探", "size": 7.84},
    {"code": "S6", "name": "兽人必须死3", "size": 12.6},
    {"code": "S8", "name": "双影奇境", "size": 87.7},
    {"code": "S16", "name": "双人成行", "size": 44.6},
    {"code": "S21", "name": "沙漠大冒险", "size": 17.6},
    {"code": "X20", "name": "兄弟：双子传说 重制版", "size": 25.5},
    {"code": "Y4", "name": "遗失的记录：绽放与愤怒", "size": 43.2},
    {"code": "Z25", "name": "植物大战僵尸杂交版", "size": 5.6},
    {"code": "A2", "name": "奥日与鬼火意志", "size": 12},
    {"code": "A3", "name": "奥日与黑暗森林", "size": 17.4},
    {"code": "C11", "name": "苍翼 混沌效应", "size": 7.15},
    {"code": "D18", "name": "东方夜雀食堂", "size": 5.01},
    {"code": "S33", "name": "失落城堡", "size": 2.39},
    {"code": "Y9", "name": "以撒的结合 重生", "size": 2.09},
    {"code": "Z39", "name": "中国式家长", "size": 0.886},
    {"code": "P5", "name": "破门而入：行动小队", "size": 0.065},
    {"code": "T7", "name": "土豆兄弟", "size": 0.257},
    {"code": "S41", "name": "失落城堡 2", "size": 0.88}
  ],

  "任天堂游戏": [
    {"code": "SWT1", "name": "Switch全家桶", "size": 449},
    {"code": "SWT2", "name": "塞尔达传说：旷野之息", "size": 15.7},
    {"code": "SWT3", "name": "塞尔达传说：王国之泪", "size": 16.6},
    {"code": "SWT4", "name": "马里奥赛车8", "size": 16.8},
    {"code": "SWT5", "name": "马里奥奥德赛", "size": 5.59},
    {"code": "SWT6", "name": "全明星大乱斗", "size": 17.3},
    {"code": "SWT7", "name": "路易吉鬼屋3", "size": 7.7},
    {"code": "SWT8", "name": "超级马里奥：惊奇", "size": 3.5},
    {"code": "SWT9", "name": "马里奥高尔夫：超级冲冲冲", "size": 4.16},
    {"code": "SWT10", "name": "马里奥派对", "size": 2.89},
    {"code": "SWT11", "name": "马里奥3D合集", "size": 4.72},
    {"code": "SWT12", "name": "马里奥疯狂兔子", "size": 4.94},
    {"code": "SWT13", "name": "宝可梦：探险寻宝", "size": 0.264},
    {"code": "SWT14", "name": "宝可梦传说：阿尔宙斯", "size": 6.1},
    {"code": "SWT15", "name": "超回转寿司先锋：寿司之道", "size": 2.82},
    {"code": "SWT16", "name": "大家1-2-Switch", "size": 3.7},
    {"code": "SWT17", "name": "疯狂伐木匠 VS Timberman VS", "size": 0.208},
    {"code": "SWT18", "name": "健身环大冒险", "size": 3.3},
    {"code": "SWT19", "name": "九龙妖魔学园纪", "size": 4.29},
    {"code": "SWT20", "name": "卡比斗士2", "size": 1.1},
    {"code": "SWT21", "name": "猎天使魔女3", "size": 15.7},
    {"code": "SWT22", "name": "马里奥3D世界+狂怒世界", "size": 2.95},
    {"code": "SWT23", "name": "马里奥网球", "size": 2.51},
    {"code": "SWT24", "name": "马里奥兄弟U豪华版", "size": 3.71},
    {"code": "SWT25", "name": "你裁我剪！斯尼帕", "size": 1.82},
    {"code": "SWT26", "name": "喷射战士3", "size": 9.02},
    {"code": "SWT27", "name": "三角战略", "size": 8.05},
    {"code": "SWT28", "name": "神臂斗士", "size": 3.23},
    {"code": "SWT29", "name": "太鼓之达人 咚咚雷音祭", "size": 7.07},
    {"code": "SWT30", "name": "星之卡比：探索发现", "size": 5.74},
    {"code": "SWT31", "name": "星之卡比：新星同盟", "size": 3.94},
    {"code": "SWT32", "name": "星之卡比Wii豪华版", "size": 7.43},
    {"code": "SWT33", "name": "耀西的手工世界", "size": 5.89},
    {"code": "SWT34", "name": "异度神剑3", "size": 19.4},
    {"code": "SWT35", "name": "游戏王", "size": 1.74},
    {"code": "SWT36", "name": "有氧拳击2", "size": 3.59}
  ],

  "休闲/多人游戏": [
    {"code": "63", "name": "双人63款游戏（包含以下）", "size": 260},
    {"code": "B3", "name": "避风港", "size": 5.55},
    {"code": "C9", "name": "茶杯头", "size": 5.4},
    {"code": "C10", "name": "超级兔子人", "size": 1.63},
    {"code": "D15", "name": "洞穴探险2", "size": 0.699},
    {"code": "D16", "name": "哆啦A梦：自然王国与和乐家人", "size": 1.99},
    {"code": "D17", "name": "捣蛋鹅", "size": 0.833},
    {"code": "F3", "name": "伐木工大冒险", "size": 0.506},
    {"code": "F4", "name": "非常英雄", "size": 2.87},
    {"code": "G13", "name": "狗狗", "size": 5.11},
    {"code": "G14", "name": "公路救赎", "size": 6.48},
    {"code": "H11", "name": "魂斗罗：暴走军团", "size": 12.3},
    {"code": "H15", "name": "魂斗罗：加鲁加行动", "size": 9.33},
    {"code": "H16", "name": "胡闹修车", "size": 2.06},
    {"code": "H17", "name": "胡闹搬家", "size": 1.33},
    {"code": "H18", "name": "胡闹厨房：全都好吃", "size": 8.65},
    {"code": "H19", "name": "胡闹厨房2", "size": 8.01},
    {"code": "H20", "name": "海绵宝宝：争霸比基尼海滩", "size": 7.67},
    {"code": "H21", "name": "海绵宝宝：宇宙摇摆", "size": 7.95},
    {"code": "H22", "name": "胡闹装修", "size": 2.72},
    {"code": "J11", "name": "加菲猫卡丁车：激情竞速", "size": 1.78},
    {"code": "J12", "name": "橡胶强盗", "size": 1.22},
    {"code": "K3", "name": "空洞骑士", "size": 10.7},
    {"code": "L7", "name": "龙珠战士Z", "size": 8.16},
    {"code": "L8", "name": "蜡笔小新：煤炭镇的小白", "size": 4.45},
    {"code": "L9", "name": "蜡笔小新 我与博士的暑假 ～没有终点的七日之旅～", "size": 2.42},
    {"code": "L10", "name": "蓝精灵：毒叶大作战", "size": 5},
    {"code": "R9", "name": "人类：一败涂地", "size": 4.84},
    {"code": "S28", "name": "守护坚果", "size": 1.73},
    {"code": "S29", "name": "三位一体5", "size": 16.9},
    {"code": "W8", "name": "我的世界：地下城", "size": 5.43},
    {"code": "X21", "name": "携手并进", "size": 1.41},
    {"code": "X22", "name": "小小梦魇2", "size": 22.1},
    {"code": "X23", "name": "星露谷物语", "size": 0.661},
    {"code": "Z29", "name": "只只大冒险", "size": 5.91},
    {"code": "Z30", "name": "终极鸡马", "size": 2.03},
    {"code": "M10", "name": "模拟山羊3", "size": 11.8},
    {"code": "M11", "name": "魔法旅馆", "size": 0.95},
    {"code": "R10", "name": "忍者神龟：施莱德的复仇", "size": 2},
    {"code": "Y10", "name": "远征 泥泞奔驰游戏", "size": 18.8},
    {"code": "Q9", "name": "枪、血与黑手党2", "size": 2.7},
    {"code": "M9", "name": "猫咪斗恶龙2", "size": 0.413},
    {"code": "M12", "name": "毛线小精灵2", "size": 7.05},
    {"code": "P3", "name": "披萨负鼠", "size": 0.875},
    {"code": "Q8", "name": "潜水员戴夫", "size": 3.31}
  ],

  "现实模拟": [
    {"code": "F7", "name": "犯罪现场清洁工", "size": 32.9},
    {"code": "W13", "name": "完蛋！我也能追到美女了", "size": 3.7},
    {"code": "W14", "name": "完蛋了 我被女神包围了", "size": 1.84},
    {"code": "Q23", "name": "请做COSER的主人2", "size": 75.7},
    {"code": "M18", "name": "名利的游戏", "size": 21.1}
  ]
}

    // 从localStorage加载数据
    let selectedGames = JSON.parse(localStorage.getItem('selectedGames')) || {};
    let totalSize = parseFloat(localStorage.getItem('totalSize')) || 0;

    // 初始化页面
    window.onload = function() {
      generateSidebar();
      displayCategories();
      updateTotal();
    };

    // 生成侧边栏分类
    function generateSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.innerHTML = '';
      for (const category in gameData) {
        const link = document.createElement('a');
        link.href = `#${category}`;
        link.textContent = category;
        sidebar.appendChild(link);
      }
    }

    // 显示游戏列表
    function displayCategories(filteredData = null) {
      const container = document.getElementById('gameCategories');
      container.innerHTML = '';
      
      const data = filteredData || gameData;
      
      for (const category in data) {
        const categoryDiv = document.createElement('div');
        categoryDiv.className = 'category';
        categoryDiv.id = category;
        
        const title = document.createElement('h2');
        title.textContent = category;
        categoryDiv.appendChild(title);
        
        data[category].forEach(game => createGameItem(categoryDiv, game));
        container.appendChild(categoryDiv);
      }
    }

    // 创建单个游戏项
    function createGameItem(container, game) {
      const gameItem = document.createElement('div');
      gameItem.className = 'game-item';
      
      // 游戏信息
      const gameInfo = document.createElement('div');
      gameInfo.className = 'game-info';
      gameInfo.innerHTML = `
        <div class="game-title">${game.name}</div>
        <div class="game-size">${game.size} GB</div>
      `;
      
      // 数量控制
      const quantityControl = document.createElement('div');
      quantityControl.className = 'quantity-control';
      quantityControl.innerHTML = `
        <button ${selectedGames[game.code] ? '' : 'disabled'} onclick="decreaseQuantity('${game.code}', ${game.size})">-</button>
        <span id="qty-${game.code}">${selectedGames[game.code] || 0}</span>
        <button ${selectedGames[game.code] ? 'disabled' : ''} onclick="increaseQuantity('${game.code}', ${game.size})">+</button>
      `;
      
      gameItem.appendChild(gameInfo);
      gameItem.appendChild(quantityControl);
      container.appendChild(gameItem);
    }

    // 增加数量
    function increaseQuantity(code, size) {
      if (!selectedGames[code]) {
        selectedGames[code] = 1;
        totalSize += size;
        updateQuantityDisplay(code);
        saveToLocalStorage();
      }
    }

    // 减少数量
    function decreaseQuantity(code, size) {
      if (selectedGames[code]) {
        selectedGames[code] = 0;
        totalSize -= size;
        updateQuantityDisplay(code);
        saveToLocalStorage();
      }
    }

    // 更新数量显示
    function updateQuantityDisplay(code) {
      const qtyElement = document.getElementById(`qty-${code}`);
      const buttons = qtyElement.parentElement.getElementsByTagName('button');
      
      qtyElement.textContent = selectedGames[code] || 0;
      buttons[0].disabled = !selectedGames[code];
      buttons[1].disabled = selectedGames[code];
      updateTotal();
    }

    // 更新总容量
    function updateTotal() {
      document.getElementById('totalSize').textContent = `总容量：${totalSize.toFixed(1)} GB`;
    }

    // 保存到本地存储
    function saveToLocalStorage() {
      localStorage.setItem('selectedGames', JSON.stringify(selectedGames));
      localStorage.setItem('totalSize', totalSize.toString());
    }

    // 生成订单
    function generateOrder() {
      const orderBody = document.getElementById('orderTableBody');
      orderBody.innerHTML = '';
      let orderTotal = 0;
      
      for (const category in gameData) {
        gameData[category].forEach(game => {
          if (selectedGames[game.code]) {
            orderTotal += game.size;
            
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${game.name}</td>
              <td>${game.size}</td>
              <td><button class="remove-btn" onclick="removeFromOrder('${game.code}', ${game.size})">删除</button></td>
            `;
            orderBody.appendChild(row);
          }
        });
      }
      
      document.getElementById('orderTotal').textContent = orderTotal.toFixed(1);
      document.getElementById('content').style.display = 'none';
      document.getElementById('sidebar').style.display = 'none';
      document.querySelector('.footer').style.display = 'none';
      document.getElementById('orderPage').style.display = 'block';
    }

    // 删除订单项
    function removeFromOrder(code, size) {
      selectedGames[code] = 0;
      totalSize -= size;
      saveToLocalStorage();
      generateOrder();
      updateTotal();
      updateQuantityDisplay(code);
    }

// 确认订单（已修改版本）
async function confirmOrder() {
  // 获取并排序选中的游戏编码
  const selectedCodes = Object.keys(selectedGames)
    .filter(code => selectedGames[code])
    .sort((a, b) => a.localeCompare(b, undefined, {numeric: true}));
  
  const orderTime = new Date().toLocaleString();
  const totalGB = totalSize.toFixed(1);
  
  try {
    // 创建自定义弹窗
    const modal = document.createElement('div');
    modal.style = `
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      z-index: 9999;
      width: 320px;
      font-family: 'Microsoft YaHei';
    `;
    
    modal.innerHTML = `
      <h3 style="color:#4b6cb7; margin-bottom:15px;">订单生成成功！</h3>
      <p style="margin:8px 0; font-size:14px;">🕒 时间：${orderTime}</p>
      <p style="margin:8px 0; font-size:14px;">🎮 已选游戏：${selectedCodes.length} 款</p>
      <p style="margin:8px 0; font-size:14px;">💾 总容量：${totalGB} GB</p>
      <div style="margin:20px 0; text-align:center;">
        <button onclick="copyGameCodes()" 
          style="padding:10px 20px; 
                 background:#4b6cb7; 
                 color:white; 
                 border:none; 
                 border-radius:25px;
                 cursor:pointer;
                 transition: all 0.3s;"
          onmouseover="this.style.transform='scale(1.05)'"
          onmouseout="this.style.transform='scale(1)'">
          复制游戏编码发给客服
        </button>
      </div>
      <button onclick="closeModal()" 
        style="padding:8px 16px;
               background:#f0f0f0;
               border:none;
               border-radius:4px;
               cursor:pointer;
               float:right;">
        全部关闭
      </button>
    `;

    // 添加蒙版
    const overlay = document.createElement('div');
    overlay.style = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9998;
    `;

    document.body.appendChild(overlay);
    document.body.appendChild(modal);

    // 全局函数绑定
    window.copyGameCodes = async () => {
  try {
    const textToCopy = `游戏编码: ${selectedCodes.join(', ')}\n总容量: ${totalGB} GB`;
    await navigator.clipboard.writeText(textToCopy);
    modal.querySelector('button').innerHTML = '✅ 复制成功！';
    setTimeout(() => {
      overlay.remove();
      modal.remove();
    }, 1500);
  } catch (err) {
    modal.innerHTML = `
      <h3 style="color:#ff5252; margin-bottom:15px;">复制失败</h3>
      <p>请手动选择下方文本：</p>
      <textarea 
        style="width:100%; 
               height:80px; 
               margin:10px 0;
               padding:8px;
               border:1px solid #ddd;" 
        readonly>游戏编码: ${selectedCodes.join(', ')}\n总容量: ${totalGB} GB</textarea>
      <button onclick="closeModal()" 
        style="padding:8px 16px;
               background:#4b6cb7;
               color:white;
               border:none;
               border-radius:4px;
               cursor:pointer;">
        关闭
      </button>
    `;
  }
};

    window.closeModal = () => {
      overlay.remove();
      modal.remove();
      // 清空数据
      selectedGames = {};
      totalSize = 0;
      saveToLocalStorage();
      backToShop();
      displayCategories();
      updateTotal();
    };

  } catch (err) {
    console.error('订单提交失败:', err);
    alert(`❌ 发生错误：${err.message}`);
  }
}
    // 返回商店
    function backToShop() {
      document.getElementById('content').style.display = 'block';
      document.getElementById('sidebar').style.display = 'block';
      document.querySelector('.footer').style.display = 'flex';
      document.getElementById('orderPage').style.display = 'none';
    }

    // 搜索功能
    function filterGames() {
      const keyword = document.getElementById('searchInput').value.toLowerCase();
      const filtered = {};
      
      for (const category in gameData) {
        filtered[category] = gameData[category].filter(game => 
          game.name.toLowerCase().includes(keyword) || 
          game.code.toLowerCase().includes(keyword)
        );
      }
      
      displayCategories(filtered);
    }
  </script>
</body>
</html>
