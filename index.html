<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æå®¢ç”µç©è®¢å•ç³»ç»Ÿ</title>
  <style>
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Microsoft YaHei', sans-serif;
      background-color: #f5f5f5;
    }
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: linear-gradient(to right, #4b6cb7, #182848);
      color: white;
      text-align: center;
      line-height: 60px;
      font-size: 20px;
      font-weight: bold;
      z-index: 100;
    }
    #searchBox {
      position: fixed;
      top: 60px;
      left: 0;
      width: 100%;
      height: 50px;
      background: white;
      padding: 10px;
      display: flex;
      justify-content: center;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      z-index: 99;
    }
    #searchBox input {
      width: 80%;
      height: 30px;
      padding: 5px 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
    }
    #sidebar {
      position: fixed;
      top: 110px;
      left: 0;
      width: 120px;
      height: calc(100vh - 110px);
      background: white;
      overflow-y: auto;
      border-right: 1px solid #eee;
    }
    #sidebar a {
      display: block;
      padding: 12px 15px;
      color: #555;
      text-decoration: none;
      border-left: 3px solid transparent;
      transition: all 0.3s;
    }
    #sidebar a:hover {
      background: #f0f0f0;
      border-left-color: #4b6cb7;
      color: #4b6cb7;
    }
    #content {
      margin-left: 120px;
      padding: 120px 20px 80px;
    }
    .category {
      background: white;
      margin-bottom: 20px;
      padding: 15px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    .category h2 {
      color: #4b6cb7;
      margin-bottom: 15px;
      padding-bottom: 5px;
      border-bottom: 1px solid #eee;
    }
    .game-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 10px;
      margin: 10px 0;
      background: #fafafa;
      border-radius: 4px;
      border: 1px solid #eee;
    }
    .game-info {
      flex: 1;
    }
    .game-title {
      font-weight: bold;
      margin-bottom: 5px;
    }
    .game-size {
      color: #666;
      font-size: 12px;
    }
    .quantity-control {
      display: flex;
      align-items: center;
    }
    .quantity-control button {
      width: 30px;
      height: 30px;
      background: #4b6cb7;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    .quantity-control button:disabled {
      background: #ccc;
      cursor: not-allowed;
    }
    .quantity-control span {
      width: 30px;
      text-align: center;
    }
    #orderPage {
      display: none;
      padding: 20px;
      background: white;
      border-radius: 5px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    #orderTable {
      width: 100%;
      border-collapse: collapse;
      margin: 15px 0;
    }
    #orderTable th, #orderTable td {
      padding: 10px;
      text-align: center;
      border: 1px solid #ddd;
    }
    #orderTable th {
      background: #f5f5f5;
    }
    .remove-btn {
      background: #ff5252;
      color: white;
      border: none;
      padding: 5px 10px;
      border-radius: 4px;
      cursor: pointer;
    }
    .footer {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      height: 60px;
      background: white;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 20px;
      border-top: 1px solid #eee;
    }
    .footer button {
      background: #4b6cb7;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 4px;
      cursor: pointer;
       /* æ–°å¢è‡ªå®šä¹‰å¼¹çª—æ ·å¼ */
    .custom-alert {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 20px rgba(0,0,0,0.2);
      z-index: 9999;
      max-width: 80%;
      min-width: 300px;
    }
    .alert-content {
      margin: 10px 0;
    }
    .game-codes {
      background: #f5f5f5;
      padding: 10px;
      border-radius: 4px;
      margin: 10px 0;
      max-height: 200px;
      overflow-y: auto;
    }
    .copy-btn {
      background: #4b6cb7;
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 4px;
      cursor: pointer;
      margin: 5px;
    }
    .alert-buttons {
      text-align: center;
      margin-top: 15px;
    }
    .overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9998;
    }
    }
  </style>
  <style>
    /* æ–°å¢é˜²æˆªå›¾ä¿æŠ¤æ ·å¼ */
    body {
      -webkit-user-select: none;  /* ç¦æ­¢æ–‡æœ¬é€‰æ‹© */
      -moz-user-select: none;
      -ms-user-select: none;
      user-select: none;
    }
    
    #gameCategories::after {
      content: "æå®¢ç”µç©å†…éƒ¨ç³»ç»Ÿ â€¢ ä¸¥ç¦æˆªå›¾";
      position: fixed;
      bottom: 80px;
      right: 20px;
      color: rgba(75,108,183,0.2);
      font-size: 24px;
      transform: rotate(-15deg);
      pointer-events: none;
      z-index: 9999;
    }
    
    /* åŠ¨æ€å¹²æ‰°çº¿ */
    @keyframes anti-screenshot {
      0% { box-shadow: 0 0 10px rgba(75,108,183,0.1); }
      50% { box-shadow: 0 0 15px rgba(255,82,82,0.2); }
      100% { box-shadow: 0 0 10px rgba(75,108,183,0.1); }
    }
    body {
      animation: anti-screenshot 2s infinite;
    }
    </style>
</head>
<body>
  <header>æå®¢ç”µç©è®¢å•ç³»ç»Ÿ</header>
  
  <div id="searchBox">
    <input type="text" id="searchInput" placeholder="æœç´¢æ¸¸æˆ..." oninput="filterGames()">
  </div>
  
  <div id="sidebar"></div>
  
  <div id="content">
    <div id="gameCategories"></div>
  </div>
  
  <div id="orderPage">
    <h2>è®¢å•è¯¦æƒ…</h2>
    <table id="orderTable">
      <thead>
        <tr>
          <th>æ¸¸æˆåç§°</th>
          <th>å•æ¬¾å®¹é‡ (GB)</th>
          <th>æ“ä½œ</th>
        </tr>
      </thead>
      <tbody id="orderTableBody"></tbody>
      <tfoot>
        <tr>
          <td style="text-align:right;">æ€»å®¹é‡ï¼š(GB)</td>
          <td id="orderTotal">0</td>
          <td></td>
        </tr>
      </tfoot>
    </table>
    <div style="text-align:center; margin-top:20px;">
      <button onclick="backToShop()">è¿”å›ç»§ç»­é€‰è´­</button>
      <button onclick="confirmOrder()">ç¡®è®¤è®¢å•</button>
    </div>
  </div>
  
  <div class="footer">
    <span id="totalSize">æ€»å®¹é‡ï¼š0 GB</span>
    <button onclick="generateOrder()">ç”Ÿæˆè®¢å•</button>
  </div>

  <script>
    // é˜²æˆªå›¾ä¿æŠ¤åŠŸèƒ½
document.addEventListener('keydown', function(e) {
  // æ£€æµ‹ PrintScreen å’Œ Windows+Shift+S
  if (e.key === 'PrintScreen' || (e.key === 's' && e.ctrlKey && e.shiftKey)) {
    alert('âš ï¸ ç³»ç»Ÿæ£€æµ‹åˆ°æˆªå›¾æ“ä½œï¼Œè¯·æ³¨æ„ä¿¡æ¯å®‰å…¨ï¼');
    document.body.style.filter = 'blur(5px)';
    setTimeout(() => document.body.style.filter = '', 2000);
  }
});

// ç¦ç”¨å³é”®èœå•
document.addEventListener('contextmenu', function(e) {
  e.preventDefault();
  alert('å³é”®åŠŸèƒ½å·²ç¦ç”¨');
  return false;
});

// é˜²æ­¢æ§åˆ¶å°æ‰“å¼€
setInterval(function() {
  if (window.outerWidth - window.innerWidth > 200 || 
      window.outerHeight - window.innerHeight > 200) {
    document.body.innerHTML = '<h1 style="color:red">æ£€æµ‹åˆ°å¼€å‘è€…å·¥å…·ï¼Œç³»ç»Ÿå·²é”å®šï¼</h1>';
    window.location.reload();
  }
}, 1000);
    // æ¸¸æˆæ•°æ®ç¤ºä¾‹
    const gameData = {
  "è§’è‰²æ‰®æ¼”RPG": [
    { "code": "A1", "name": "è‰¾å°”ç™»æ³•ç¯", "size": 66.2 },
    { "code": "B1", "name": "åšå¾·ä¹‹é—¨3", "size": 147 },
    { "code": "C3", "name": "åˆºå®¢ä¿¡æ¡ï¼šå¥¥å¾·èµ›", "size": 101 },
    { "code": "C4", "name": "åˆºå®¢ä¿¡æ¡ï¼šèµ·æº", "size": 73.3 },
    { "code": "C5", "name": "åˆºå®¢ä¿¡æ¡ï¼šè‹±çµæ®¿", "size": 130 },
    { "code": "H2", "name": "éœæ ¼æ²ƒèŒ¨ä¹‹é—", "size": 73.9 },
    { "code": "H5", "name": "è’é‡å¤§é•–å®¢2", "size": 119 },
    { "code": "L3", "name": "é¾™ä¹‹ä¿¡æ¡2", "size": 70.8 },
    { "code": "S1", "name": "èµ›åšæœ‹å…‹2077", "size": 90.8 },
    { "code": "W4", "name": "å·«å¸ˆ3 æ¬¡ä¸–ä»£ç‰ˆ", "size": 61.7 },
    { "code": "Z6", "name": "æœ€ç»ˆå¹»æƒ³ VII é‡ç”Ÿ", "size": 154 },
    { "code": "Z19", "name": "æœ€ç»ˆå¹»æƒ³16", "size": 151 }
  ],

  "åŠ¨ä½œå†’é™©": [
    { "code": "C1", "name": "åˆºå®¢ä¿¡æ¡4ï¼šé»‘æ——", "size": 28.5 },
    { "code": "C2", "name": "åˆºå®¢ä¿¡æ¡ï¼šå¹»æ™¯", "size": 41.2 },
    { "code": "C6", "name": "åˆºå®¢ä¿¡æ¡ï¼šå¤§é©å‘½", "size": 51.3 },
    { "code": "D6", "name": "åœ°å¹³çº¿ï¼šé›¶ä¹‹æ›™å…‰", "size": 120 },
    { "code": "D7", "name": "åœ°å¹³çº¿ï¼šè¥¿ä¹‹ç»å¢ƒ", "size": 123 },
    { "code": "D10", "name": "å¯¹é©¬å²›ä¹‹é­‚å¯¼æ¼”å‰ªè¾‘ç‰ˆ", "size": 52.1 },
    { "code": "G1", "name": "å­¤å²›æƒŠé­‚6", "size": 77.4 },
    { "code": "G2", "name": "ä¾ ç›—çŒè½¦æ‰‹/GTA5", "size": 98.3 },
    { "code": "S7", "name": "ç¥ç§˜æµ·åŸŸï¼šç›—è´¼é—äº§åˆé›†", "size": 99.5 },
    { "code": "Z9", "name": "æˆ˜ç¥4", "size": 64.6 },
    { "code": "Z10", "name": "æˆ˜ç¥5ï¼šè¯¸ç¥é»„æ˜", "size": 178 }
  ],

  "å°„å‡»ç±»": [
    { "code": "COD4CZ", "name": "ä½¿å‘½å¬å”¤4ï¼šç°ä»£æˆ˜äº‰é‡åˆ¶ç‰ˆ", "size": 62.3 },
    { "code": "COD6CZ", "name": "ä½¿å‘½å¬å”¤6ï¼šç°ä»£æˆ˜äº‰2é‡åˆ¶ç‰ˆ", "size": 63.8 },
    { "code": "COD7", "name": "ä½¿å‘½å¬å”¤7ï¼šé»‘è‰²è¡ŒåŠ¨", "size": 7.84 },
    { "code": "COD8", "name": "ä½¿å‘½å¬å”¤8ï¼šç°ä»£æˆ˜äº‰3", "size": 13.7 },
    { "code": "H1", "name": "æ¯ç­æˆ˜å£«", "size": 62.2 },
    { "code": "H6", "name": "çš‡ç‰Œç©ºæˆ˜7ï¼šæœªçŸ¥ç©ºåŸŸ", "size": 61.1 },
    { "code": "T4", "name": "æ³°å¦é™¨è½2", "size": 58 },
    { "code": "Z1", "name": "æˆ˜åœ°1", "size": 30.8 },
    { "code": "Z4", "name": "æˆ˜åœ°4", "size": 25.5 },
    { "code": "Z5", "name": "æˆ˜åœ°5", "size": 50.2 }
  ],

  "ç­–ç•¥æ¨¡æ‹Ÿ": [
    { "code": "C7", "name": "åŸå¸‚å¤©é™…çº¿2", "size": 62.6 },
    { "code": "D8", "name": "åŠ¨ç‰©å›­ä¹‹æ˜Ÿ", "size": 10.9 },
    { "code": "D12", "name": "å¸å›½æ—¶ä»£2å†³å®šç‰ˆ", "size": 57.3 },
    { "code": "D14", "name": "å¸å›½æ—¶ä»£4", "size": 54.1 },
    { "code": "W6", "name": "æ–‡æ˜6", "size": 27.6 },
    { "code": "X4", "name": "å¹¸ç¦å·¥å‚", "size": 25.3 },
    { "code": "Z17", "name": "æˆ˜äº‰å·ä»¤ï¼šåœ°ç‹±ä¹‹é—¨", "size": 181 },
    { "code": "Z18", "name": "æˆ˜é”¤40Kï¼šè¡Œå•†æµªäºº", "size": 36.6 }
  ],

  "æ ¼æ–—/åŠ¨ä½œ": [
    { "code": "G3", "name": "é¬¼æ³£5", "size": 40.1 },
    { "code": "H3", "name": "ç«å½±å¿è€…ï¼šç»ˆæé£æš´ç¾ç»Š", "size": 29.7 },
    { "code": "J6", "name": "è¡—å¤´éœ¸ç‹5", "size": 46.2 },
    { "code": "Q4", "name": "æ‹³çš‡15", "size": 50.9 },
    { "code": "Q6", "name": "æ‹³çš‡14", "size": 17.3 },
    { "code": "S17", "name": "å¸ˆçˆ¶", "size": 20 },
    { "code": "T3", "name": "é“æ‹³8", "size": 92.9 },
    { "code": "Z11", "name": "çœŸäººå¿«æ‰“11", "size": 108 },
    { "code": "Z13", "name": "çœŸäººå¿«æ‰“X", "size": 40.2 },
    { "code": "Z14", "name": "åªç‹¼", "size": 14.8 }
  ],

  "ä½“è‚²ç«é€Ÿ": [
    { "code": "D4", "name": "æé™ç«é€Ÿï¼šåœ°å¹³çº¿4", "size": 110 },
    { "code": "D5", "name": "æé™ç«é€Ÿï¼šåœ°å¹³çº¿5", "size": 175 },
    { "code": "E1", "name": "EA è¿åŠ¨ FC 25 è¶³çƒ", "size": 48.2 },
    { "code": "J5", "name": "æé™å·…å³°", "size": 29.6 },
    { "code": "J9", "name": "æé™å›½åº¦", "size": 26.2 },
    { "code": "J10", "name": "æé€Ÿéª‘è¡Œ5", "size": 48.7 },
    { "code": "N1", "name": "NBA 2K23", "size": 137 },
    { "code": "N3", "name": "NBA18", "size": 66.1 }
  ],

  "ç”Ÿå­˜/å¼€æ”¾ä¸–ç•Œ": [
    { "code": "F1", "name": "è¾å°„4 modç‰ˆ", "size": 144 },
    { "code": "H4", "name": "å¹»å…½å¸•é²", "size": 26.1 },
    { "code": "J2", "name": "ç¦é—­æ±‚ç”Ÿ", "size": 10.3 },
    { "code": "L5", "name": "çŒäººï¼šé‡æ€§çš„å‘¼å”¤/çŒäººï¼šè’é‡çš„å‘¼å”¤", "size": 94.1 },
    { "code": "W5", "name": "æ— äººæ·±ç©º", "size": 12.6 },
    { "code": "X12", "name": "æ˜Ÿç©º", "size": 140 },
    { "code": "Y6", "name": "é—è¿¹2", "size": 86.5 }
  ],

  "ææ€–/æƒŠæ‚š": [
    { "code": "J3", "name": "å¯‚é™å²­2", "size": 34.7 },
    { "code": "S9", "name": "ç”ŸåŒ–å±æœº3", "size": 22.5 },
    { "code": "S10", "name": "ç”ŸåŒ–å±æœº4", "size": 59.1 },
    { "code": "S13", "name": "ç”ŸåŒ–å±æœº7", "size": 38.5 },
    { "code": "S14", "name": "ç”ŸåŒ–å±æœº8", "size": 37.7 },
    { "code": "X1", "name": "å¿ƒçµæ€æ‰‹2", "size": 106 }
  ],

  "ç‹¬ç«‹æ¸¸æˆ": [
    { "code": "S5", "name": "å±±æ²³æ—…æ¢", "size": 7.84 },
    { "code": "S6", "name": "å…½äººå¿…é¡»æ­»3", "size": 12.6 },
    { "code": "X20", "name": "å…„å¼Ÿï¼šåŒå­ä¼ è¯´ é‡åˆ¶ç‰ˆ", "size": 25.5 },
    { "code": "Z25", "name": "æ¤ç‰©å¤§æˆ˜åƒµå°¸æ‚äº¤ç‰ˆ", "size": 5.6 }
  ],

  "å…¶ä»–ç±»å‹": [
    { "code": "G4", "name": "æ€ªç‰©çŒäººï¼šä¸–ç•Œ", "size": 98.4 },
    { "code": "L1", "name": "é¾™ç ï¼šè¶…å®‡å®™2", "size": 30.2 },
    { "code": "L2", "name": "é¾™ç Zï¼šå¡å¡ç½—ç‰¹", "size": 51.2 },
    { "code": "Q7", "name": "éª‘é©¬ä¸ç æ€2", "size": 49.8 },
    { "code": "W1", "name": "ç˜Ÿç–«ä¼ è¯´ï¼šå®‰é­‚æ›²", "size": 49.4 },
    { "code": "Z22", "name": "ç›´åˆ°é»æ˜ï¼šé‡åˆ¶ç‰ˆ", "size": 59.4 }
  ]
};

    // ä»localStorageåŠ è½½æ•°æ®
    let selectedGames = JSON.parse(localStorage.getItem('selectedGames')) || {};
    let totalSize = parseFloat(localStorage.getItem('totalSize')) || 0;

    // åˆå§‹åŒ–é¡µé¢
    window.onload = function() {
      generateSidebar();
      displayCategories();
      updateTotal();
    };

    // ç”Ÿæˆä¾§è¾¹æ åˆ†ç±»
    function generateSidebar() {
      const sidebar = document.getElementById('sidebar');
      sidebar.innerHTML = '';
      for (const category in gameData) {
        const link = document.createElement('a');
        link.href = `#${category}`;
        link.textContent = category;
        sidebar.appendChild(link);
      }
    }

    // æ˜¾ç¤ºæ¸¸æˆåˆ—è¡¨
    function displayCategories(filteredData = null) {
      const container = document.getElementById('gameCategories');
      container.innerHTML = '';
      
      const data = filteredData || gameData;
      
      for (const category in data) {
        const categoryDiv = document.createElement('div');
        categoryDiv.className = 'category';
        categoryDiv.id = category;
        
        const title = document.createElement('h2');
        title.textContent = category;
        categoryDiv.appendChild(title);
        
        data[category].forEach(game => createGameItem(categoryDiv, game));
        container.appendChild(categoryDiv);
      }
    }

    // åˆ›å»ºå•ä¸ªæ¸¸æˆé¡¹
    function createGameItem(container, game) {
      const gameItem = document.createElement('div');
      gameItem.className = 'game-item';
      
      // æ¸¸æˆä¿¡æ¯
      const gameInfo = document.createElement('div');
      gameInfo.className = 'game-info';
      gameInfo.innerHTML = `
        <div class="game-title">${game.name}</div>
        <div class="game-size">${game.size} GB</div>
      `;
      
      // æ•°é‡æ§åˆ¶
      const quantityControl = document.createElement('div');
      quantityControl.className = 'quantity-control';
      quantityControl.innerHTML = `
        <button ${selectedGames[game.code] ? '' : 'disabled'} onclick="decreaseQuantity('${game.code}', ${game.size})">-</button>
        <span id="qty-${game.code}">${selectedGames[game.code] || 0}</span>
        <button ${selectedGames[game.code] ? 'disabled' : ''} onclick="increaseQuantity('${game.code}', ${game.size})">+</button>
      `;
      
      gameItem.appendChild(gameInfo);
      gameItem.appendChild(quantityControl);
      container.appendChild(gameItem);
    }

    // å¢åŠ æ•°é‡
    function increaseQuantity(code, size) {
      if (!selectedGames[code]) {
        selectedGames[code] = 1;
        totalSize += size;
        updateQuantityDisplay(code);
        saveToLocalStorage();
      }
    }

    // å‡å°‘æ•°é‡
    function decreaseQuantity(code, size) {
      if (selectedGames[code]) {
        selectedGames[code] = 0;
        totalSize -= size;
        updateQuantityDisplay(code);
        saveToLocalStorage();
      }
    }

    // æ›´æ–°æ•°é‡æ˜¾ç¤º
    function updateQuantityDisplay(code) {
      const qtyElement = document.getElementById(`qty-${code}`);
      const buttons = qtyElement.parentElement.getElementsByTagName('button');
      
      qtyElement.textContent = selectedGames[code] || 0;
      buttons[0].disabled = !selectedGames[code];
      buttons[1].disabled = selectedGames[code];
      updateTotal();
    }

    // æ›´æ–°æ€»å®¹é‡
    function updateTotal() {
      document.getElementById('totalSize').textContent = `æ€»å®¹é‡ï¼š${totalSize.toFixed(1)} GB`;
    }

    // ä¿å­˜åˆ°æœ¬åœ°å­˜å‚¨
    function saveToLocalStorage() {
      localStorage.setItem('selectedGames', JSON.stringify(selectedGames));
      localStorage.setItem('totalSize', totalSize.toString());
    }

    // ç”Ÿæˆè®¢å•
    function generateOrder() {
      const orderBody = document.getElementById('orderTableBody');
      orderBody.innerHTML = '';
      let orderTotal = 0;
      
      for (const category in gameData) {
        gameData[category].forEach(game => {
          if (selectedGames[game.code]) {
            orderTotal += game.size;
            
            const row = document.createElement('tr');
            row.innerHTML = `
              <td>${game.name}</td>
              <td>${game.size}</td>
              <td><button class="remove-btn" onclick="removeFromOrder('${game.code}', ${game.size})">åˆ é™¤</button></td>
            `;
            orderBody.appendChild(row);
          }
        });
      }
      
      document.getElementById('orderTotal').textContent = orderTotal.toFixed(1);
      document.getElementById('content').style.display = 'none';
      document.getElementById('sidebar').style.display = 'none';
      document.querySelector('.footer').style.display = 'none';
      document.getElementById('orderPage').style.display = 'block';
    }

    // åˆ é™¤è®¢å•é¡¹
    function removeFromOrder(code, size) {
      selectedGames[code] = 0;
      totalSize -= size;
      saveToLocalStorage();
      generateOrder();
      updateTotal();
      updateQuantityDisplay(code);
    }

// ç¡®è®¤è®¢å•ï¼ˆå·²ä¿®æ”¹ç‰ˆæœ¬ï¼‰
async function confirmOrder() {
  const selectedCodes = Object.keys(selectedGames).filter(code => selectedGames[code]);
  const orderTime = new Date().toLocaleString();
  const totalGB = totalSize.toFixed(1);
  
  try {
    // åˆ›å»ºè‡ªå®šä¹‰å¼¹çª—
    const modal = document.createElement('div');
    modal.style = `
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 0 10px rgba(0,0,0,0.3);
      z-index: 9999;
      width: 320px;
      font-family: 'Microsoft YaHei';
    `;
    
    modal.innerHTML = `
      <h3 style="color:#4b6cb7; margin-bottom:15px;">è®¢å•ç”ŸæˆæˆåŠŸï¼</h3>
      <p style="margin:8px 0; font-size:14px;">ğŸ•’ æ—¶é—´ï¼š${orderTime}</p>
      <p style="margin:8px 0; font-size:14px;">ğŸ® å·²é€‰æ¸¸æˆï¼š${selectedCodes.length} æ¬¾</p>
      <p style="margin:8px 0; font-size:14px;">ğŸ’¾ æ€»å®¹é‡ï¼š${totalGB} GB</p>
      <div style="margin:20px 0; text-align:center;">
        <button onclick="copyGameCodes()" 
          style="padding:10px 20px; 
                 background:#4b6cb7; 
                 color:white; 
                 border:none; 
                 border-radius:25px;
                 cursor:pointer;
                 transition: all 0.3s;"
          onmouseover="this.style.transform='scale(1.05)'"
          onmouseout="this.style.transform='scale(1)'">
          å¤åˆ¶æ¸¸æˆç¼–ç å‘ç»™å®¢æœ
        </button>
      </div>
      <button onclick="closeModal()" 
        style="padding:8px 16px;
               background:#f0f0f0;
               border:none;
               border-radius:4px;
               cursor:pointer;
               float:right;">
        å…³é—­
      </button>
    `;

    // æ·»åŠ è’™ç‰ˆ
    const overlay = document.createElement('div');
    overlay.style = `
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9998;
    `;

    document.body.appendChild(overlay);
    document.body.appendChild(modal);

    // å…¨å±€å‡½æ•°ç»‘å®š
    window.copyGameCodes = async () => {
      try {
        await navigator.clipboard.writeText(selectedCodes.join(','));
        modal.querySelector('button').innerHTML = 'âœ… å¤åˆ¶æˆåŠŸï¼';
        setTimeout(() => {
          overlay.remove();
          modal.remove();
        }, 1500);
      } catch (err) {
        modal.innerHTML = `
          <h3 style="color:#ff5252; margin-bottom:15px;">å¤åˆ¶å¤±è´¥</h3>
          <p>è¯·æ‰‹åŠ¨é€‰æ‹©ä¸‹æ–¹æ–‡æœ¬ï¼š</p>
          <textarea 
            style="width:100%; 
                   height:80px; 
                   margin:10px 0;
                   padding:8px;
                   border:1px solid #ddd;" 
            readonly>${selectedCodes.join(', ')}</textarea>
          <button onclick="closeModal()" 
            style="padding:8px 16px;
                   background:#4b6cb7;
                   color:white;
                   border:none;
                   border-radius:4px;
                   cursor:pointer;">
            å…³é—­
          </button>
        `;
      }
    };

    window.closeModal = () => {
      overlay.remove();
      modal.remove();
      // æ¸…ç©ºæ•°æ®
      selectedGames = {};
      totalSize = 0;
      saveToLocalStorage();
      backToShop();
      displayCategories();
      updateTotal();
    };

  } catch (err) {
    console.error('è®¢å•æäº¤å¤±è´¥:', err);
    alert(`âŒ å‘ç”Ÿé”™è¯¯ï¼š${err.message}`);
  }
}
    // è¿”å›å•†åº—
    function backToShop() {
      document.getElementById('content').style.display = 'block';
      document.getElementById('sidebar').style.display = 'block';
      document.querySelector('.footer').style.display = 'flex';
      document.getElementById('orderPage').style.display = 'none';
    }

    // æœç´¢åŠŸèƒ½
    function filterGames() {
      const keyword = document.getElementById('searchInput').value.toLowerCase();
      const filtered = {};
      
      for (const category in gameData) {
        filtered[category] = gameData[category].filter(game => 
          game.name.toLowerCase().includes(keyword) || 
          game.code.toLowerCase().includes(keyword)
        );
      }
      
      displayCategories(filtered);
    }
  </script>
</body>
</html>
