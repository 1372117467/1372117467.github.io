<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>æå®¢å•æœº - å°ç¨‹åºè·³è½¬</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto;
    background:linear-gradient(135deg,#1e5799 0%,#207cca 51%,#2989d8 100%);
    height:100vh;color:#fff;overflow:hidden;
    display:flex;justify-content:center;align-items:center
}
.container{
    display:flex;flex-direction:column;align-items:center;
    justify-content:center;text-align:center;
    padding:20px;max-width:400px;width:100%
}
.logo{
    width:80px;height:80px;border-radius:20px;
    margin-bottom:20px;background:rgba(255,255,255,.1);
    display:flex;align-items:center;justify-content:center;
    font-size:40px;font-weight:bold
}
.qrcode-container{
    background:#fff;padding:15px;border-radius:12px;
    box-shadow:0 10px 30px rgba(0,0,0,.2);margin:20px 0
}
.qrcode-img{width:200px;height:200px;border-radius:8px}
h1{font-size:28px;margin-bottom:10px;font-weight:600}
.subtitle{font-size:16px;opacity:.9;margin-bottom:20px}
.tips{font-size:15px;opacity:.85;line-height:1.5}
.btn{
    background:#07C160;color:#fff;border:none;
    padding:15px 30px;border-radius:30px;
    font-size:16px;font-weight:600;cursor:pointer;
    box-shadow:0 4px 15px rgba(0,0,0,.2);
    margin-top:20px;min-width:200px
}
.status{
    margin-top:15px;padding:8px 18px;
    background:rgba(255,255,255,.15);
    border-radius:20px;font-size:14px
}
.loading{
    display:flex;flex-direction:column;
    align-items:center;justify-content:center
}
.spinner{
    width:50px;height:50px;
    border:5px solid rgba(255,255,255,.3);
    border-top-color:#fff;border-radius:50%;
    animation:spin 1s linear infinite;margin-bottom:20px
}
@keyframes spin{to{transform:rotate(360deg)}}
.wave{
    position:absolute;bottom:0;left:0;
    width:100%;height:100px;
    background:url("data:image/svg+xml;utf8,<svg viewBox='0 0 1440 320' xmlns='http://www.w3.org/2000/svg'><path fill='rgba(255,255,255,0.1)' d='M0,192L48,197.3C96,203,192,213,288,229.3C384,245,480,267,576,250.7C672,235,768,181,864,181.3C960,181,1056,235,1152,234.7C1248,235,1344,181,1392,154.7L1440,128L1440,320L0,320Z'/></svg>");
    background-size:cover
}
</style>
</head>

<body>

<div class="loading" id="loading">
    <div class="spinner"></div>
    <div>æ­£åœ¨æ‰“å¼€å°ç¨‹åº...</div>
</div>

<div class="container" id="mainContent" style="display:none">
    <div class="logo">ğŸ®</div>
    <h1>æå®¢å•æœº</h1>
    <div class="subtitle">ç²¾å“æ¸¸æˆ Â· å³ç‚¹å³ç©</div>

    <div class="qrcode-container">
        <img class="qrcode-img" src="https://i.ibb.co/qhmwTkr/geek-game-qrcode.png">
    </div>

    <div class="tips">è¯·ä½¿ç”¨å¾®ä¿¡æ‰«ç ï¼Œæˆ–ç‚¹å‡»æŒ‰é’®æ‰“å¼€å°ç¨‹åº</div>

    <button class="btn" id="openBtn">æ‰“å¼€å¾®ä¿¡å°ç¨‹åº</button>
    <div class="status" id="status"></div>
</div>

<div class="wave"></div>

<script>
const config = {
    appId: 'wx449384600a33d0dd',
    path: 'pages/game/game.html'
};

document.addEventListener('DOMContentLoaded', () => {
    requestAnimationFrame(() => {
        requestAnimationFrame(() => {
            if (isWeixin()) {
                autoLaunch();
            } else {
                showMain('è¯·åœ¨å¾®ä¿¡ä¸­æ‰“å¼€ï¼Œæˆ–æ‰«æäºŒç»´ç ');
            }
        });
    });
});

function isWeixin() {
    return /MicroMessenger/i.test(navigator.userAgent);
}

function autoLaunch() {
    setTimeout(() => {
        tryLaunch(true);
    }, 300);
}

function tryLaunch(auto = false) {
    const url = `weixin://dl/business/?appid=${config.appId}&path=${encodeURIComponent(config.path)}`;
    window.location.href = url;

    setTimeout(() => {
        if (!document.hidden) {
            showMain(auto ? 'æœªèƒ½è‡ªåŠ¨æ‰“å¼€ï¼Œè¯·ç‚¹å‡»æŒ‰é’®é‡è¯•' : 'æ‰“å¼€å¤±è´¥ï¼Œè¯·é‡è¯•');
        }
    }, 2000);
}

function showMain(msg) {
    document.getElementById('loading').style.display = 'none';
    document.getElementById('mainContent').style.display = 'flex';
    document.getElementById('status').innerText = msg;
}

document.getElementById('openBtn').onclick = () => tryLaunch(false);
</script>

</body>
</html>
